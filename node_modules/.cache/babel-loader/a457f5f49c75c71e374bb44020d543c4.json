{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/rolis/source/repos/radio_api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rolis/source/repos/radio_api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\rolis\\\\source\\\\repos\\\\radio_api\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import{RadioBrowserApi}from'radio-browser-api';import AudioPlayer from\"react-h5-audio-player\";import'react-h5-audio-player/src/styles.scss';import defaultImage from\"./radio.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Radio(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),stations=_useState2[0],setStations=_useState2[1];var _useState3=useState(\"all\"),_useState4=_slicedToArray(_useState3,2),stationFilter=_useState4[0],setStationFilter=_useState4[1];useEffect(function(){setupApi(stationFilter).then(function(data){console.log(data);setStations(data);});},[stationFilter]);var setupApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(stationFilter){var api,stations;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:api=new RadioBrowserApi(fetch.bind(window),\"My Radio App\");_context.next=3;return api.searchStations({language:'english',tag:stationFilter,limit:30}).then(function(data){return data;});case 3:stations=_context.sent;return _context.abrupt(\"return\",stations);case 5:case\"end\":return _context.stop();}}},_callee);}));return function setupApi(_x){return _ref.apply(this,arguments);};}();var filters=[\"all\",\"classical\",\"country\",\"dance\",\"disco\",\"house\",\"jazz\",\"pop\",\"rap\",\"retro\",\"rock\"];var setDefaultSrc=function setDefaultSrc(event){event.target.src=defaultImage;};return/*#__PURE__*/_jsxs(\"div\",{className:\"radio\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filters\",children:filters.map(function(filter,index){return/*#__PURE__*/_jsx(\"span\",{className:stationFilter===filter?\"selected\":\"\",onClick:function onClick(){return setStationFilter(filter);},children:filter},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"stations\",children:stations&&stations.map(function(station,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"station\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stationName\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:station.favicon,alt:\"station logo\",onError:setDefaultSrc}),/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:station.name})]}),/*#__PURE__*/_jsx(AudioPlayer,{className:\"player\",src:station.urlResolved,showJumpControls:false,layout:\"stacked\",customProgressBarSection:[],customControlsSection:[\"MAIN_CONTROLS\",\"VOLUME_CONTROLS\"],autoPlayAfterSrcChange:false})]},index);})})]});}","map":{"version":3,"names":["React","useEffect","useState","RadioBrowserApi","AudioPlayer","defaultImage","Radio","stations","setStations","stationFilter","setStationFilter","setupApi","then","data","console","log","api","fetch","bind","window","searchStations","language","tag","limit","filters","setDefaultSrc","event","target","src","map","filter","index","station","favicon","name","urlResolved"],"sources":["C:/Users/rolis/source/repos/radio_api/src/Radio.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { RadioBrowserApi } from 'radio-browser-api'\r\nimport AudioPlayer from \"react-h5-audio-player\"\r\nimport 'react-h5-audio-player/src/styles.scss'\r\nimport defaultImage from \"./radio.png\"\r\n\r\nexport default function Radio() {\r\n  const [stations, setStations] = useState()\r\n  const [stationFilter, setStationFilter] = useState(\"all\")\r\n\r\n  useEffect(() => {\r\n    setupApi(stationFilter).then(data => {\r\n      console.log(data)\r\n      setStations(data)\r\n    })\r\n  }, [stationFilter])\r\n\r\n  const setupApi = async stationFilter => {\r\n    const api = new RadioBrowserApi(fetch.bind(window), \"My Radio App\")\r\n\r\n    const stations = await api\r\n      .searchStations({\r\n        language: 'english',\r\n        tag: stationFilter,\r\n        limit: 30,\r\n      })\r\n      .then(data => {\r\n        return data\r\n      })\r\n\r\n    return stations\r\n  }\r\n\r\n  const filters = [\r\n    \"all\",\r\n    \"classical\",\r\n    \"country\",\r\n    \"dance\",\r\n    \"disco\",\r\n    \"house\",\r\n    \"jazz\",\r\n    \"pop\",\r\n    \"rap\",\r\n    \"retro\",\r\n    \"rock\",\r\n  ]\r\n\r\n  const setDefaultSrc = event => {\r\n    event.target.src = defaultImage\r\n  }\r\n\r\n  return (\r\n    <div className=\"radio\">\r\n      <div className=\"filters\">\r\n        {filters.map((filter, index) => (\r\n          <span\r\n            key={index}\r\n            className={stationFilter === filter ? \"selected\" : \"\"}\r\n            onClick={() => setStationFilter(filter)}\r\n          >\r\n            {filter}\r\n          </span>\r\n        ))}\r\n      </div>\r\n      <div className=\"stations\">\r\n        {stations &&\r\n          stations.map((station, index) => {\r\n            return (\r\n              <div className=\"station\" key={index}>\r\n                <div className=\"stationName\">\r\n                  <img\r\n                    className=\"logo\"\r\n                    src={station.favicon}\r\n                    alt=\"station logo\"\r\n                    onError={setDefaultSrc}\r\n                  />\r\n                  <div className=\"name\">{station.name}</div>\r\n                </div>\r\n\r\n                <AudioPlayer\r\n                  className=\"player\"\r\n                  src={station.urlResolved}\r\n                  showJumpControls={false}\r\n                  layout=\"stacked\"\r\n                  customProgressBarSection={[]}\r\n                  customControlsSection={[\"MAIN_CONTROLS\", \"VOLUME_CONTROLS\"]}\r\n                  autoPlayAfterSrcChange={false}\r\n                />\r\n              </div>\r\n            )\r\n          })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"8XAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,eAAT,KAAgC,mBAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAO,uCAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,aAAzB,C,wFAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC9B,cAAgCJ,QAAQ,EAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAA0CN,QAAQ,CAAC,KAAD,CAAlD,yCAAOO,aAAP,eAAsBC,gBAAtB,eAEAT,SAAS,CAAC,UAAM,CACdU,QAAQ,CAACF,aAAD,CAAR,CAAwBG,IAAxB,CAA6B,SAAAC,IAAI,CAAI,CACnCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAL,WAAW,CAACK,IAAD,CAAX,CACD,CAHD,EAID,CALQ,CAKN,CAACJ,aAAD,CALM,CAAT,CAOA,GAAME,CAAAA,QAAQ,0FAAG,iBAAMF,aAAN,mIACTO,GADS,CACH,GAAIb,CAAAA,eAAJ,CAAoBc,KAAK,CAACC,IAAN,CAAWC,MAAX,CAApB,CAAwC,cAAxC,CADG,uBAGQH,CAAAA,GAAG,CACvBI,cADoB,CACL,CACdC,QAAQ,CAAE,SADI,CAEdC,GAAG,CAAEb,aAFS,CAGdc,KAAK,CAAE,EAHO,CADK,EAMpBX,IANoB,CAMf,SAAAC,IAAI,CAAI,CACZ,MAAOA,CAAAA,IAAP,CACD,CARoB,CAHR,QAGTN,QAHS,+CAaRA,QAbQ,wDAAH,kBAARI,CAAAA,QAAQ,4CAAd,CAgBA,GAAMa,CAAAA,OAAO,CAAG,CACd,KADc,CAEd,WAFc,CAGd,SAHc,CAId,OAJc,CAKd,OALc,CAMd,OANc,CAOd,MAPc,CAQd,KARc,CASd,KATc,CAUd,OAVc,CAWd,MAXc,CAAhB,CAcA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,KAAK,CAAI,CAC7BA,KAAK,CAACC,MAAN,CAAaC,GAAb,CAAmBvB,YAAnB,CACD,CAFD,CAIA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,YAAK,SAAS,CAAC,SAAf,UACGmB,OAAO,CAACK,GAAR,CAAY,SAACC,MAAD,CAASC,KAAT,qBACX,aAEE,SAAS,CAAEtB,aAAa,GAAKqB,MAAlB,CAA2B,UAA3B,CAAwC,EAFrD,CAGE,OAAO,CAAE,yBAAMpB,CAAAA,gBAAgB,CAACoB,MAAD,CAAtB,EAHX,UAKGA,MALH,EACOC,KADP,CADW,EAAZ,CADH,EADF,cAYE,YAAK,SAAS,CAAC,UAAf,UACGxB,QAAQ,EACPA,QAAQ,CAACsB,GAAT,CAAa,SAACG,OAAD,CAAUD,KAAV,CAAoB,CAC/B,mBACE,aAAK,SAAS,CAAC,SAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,YACE,SAAS,CAAC,MADZ,CAEE,GAAG,CAAEC,OAAO,CAACC,OAFf,CAGE,GAAG,CAAC,cAHN,CAIE,OAAO,CAAER,aAJX,EADF,cAOE,YAAK,SAAS,CAAC,MAAf,UAAuBO,OAAO,CAACE,IAA/B,EAPF,GADF,cAWE,KAAC,WAAD,EACE,SAAS,CAAC,QADZ,CAEE,GAAG,CAAEF,OAAO,CAACG,WAFf,CAGE,gBAAgB,CAAE,KAHpB,CAIE,MAAM,CAAC,SAJT,CAKE,wBAAwB,CAAE,EAL5B,CAME,qBAAqB,CAAE,CAAC,eAAD,CAAkB,iBAAlB,CANzB,CAOE,sBAAsB,CAAE,KAP1B,EAXF,GAA8BJ,KAA9B,CADF,CAuBD,CAxBD,CAFJ,EAZF,GADF,CA2CD"},"metadata":{},"sourceType":"module"}